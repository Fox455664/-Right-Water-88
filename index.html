<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    
    <!-- SEO Optimization -->
    <title>البدروم كافيه | El-Badroom Cafe - المنيو الرسمي</title>
    <meta name="description" content="تصفح منيو البدروم كافيه في المنصورة. مشروبات، حلويات، وسناكس بأعلى جودة." />
    <meta property="og:title" content="البدروم كافيه | El-Badroom Cafe" />
    <meta property="og:image" content="https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=1000&auto=format&fit=crop" />

    <!-- الأيقونات والخطوط -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
    
    <style>
        :root {
            --gold: #d4af37;
            --dark: #0a0a0a;
            --accent: #e67e22;
            --bg-body: #fdfdfd;
        }

        body { font-family: 'Cairo', sans-serif; background-color: var(--bg-body); margin: 0; overflow-x: hidden; }

        /* --- شاشة التحميل (Splash Screen) --- */
        #splash-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--dark); z-index: 10000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.8s ease, visibility 0.8s;
        }
        
        /* شريط التحميل العلوي */
        .loading-bar {
            position: absolute; top: 0; left: 0; height: 5px;
            background: var(--gold); box-shadow: 0 0 15px var(--gold);
            width: 0%; animation: loadProgress 3s forwards;
        }
        @keyframes loadProgress { 0% { width: 0%; } 100% { width: 100%; } }

        .splash-content { text-align: center; }
        .splash-content h2 {
            color: var(--gold); font-weight: 900; font-size: 1.8rem;
            margin-bottom: 20px; opacity: 0; animation: fadeInText 1s forwards 0.5s;
        }
        @keyframes fadeInText { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* كوب القهوة المتحرك */
        .coffee-container {
            width: 150px; height: 150px; position: relative;
            animation: bounce 2s infinite ease-in-out;
        }
        .coffee-icon { font-size: 5rem; color: var(--gold); }
        .steam {
            position: absolute; top: -20px; left: 50%; transform: translateX(-50%);
            font-size: 2rem; color: #555; animation: steamMove 2s infinite linear; opacity: 0;
        }
        @keyframes steamMove { 
            0% { transform: translate(-50%, 0); opacity: 0; }
            50% { opacity: 0.6; }
            100% { transform: translate(-50%, -40px); opacity: 0; }
        }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        /* --- باقي الموقع --- */
        header.hero {
            background: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.85)), url('https://images.unsplash.com/photo-1554118811-1e0d58224f24?auto=format&fit=crop&q=80&w=1000');
            background-size: cover; background-position: center;
            height: 250px; display: flex; justify-content: center; align-items: center;
            color: var(--gold); border-radius: 0 0 40px 40px; text-align: center;
        }
        .hero h1 { font-weight: 900; font-size: 3rem; }

        nav.category-nav {
            position: sticky; top: 0; z-index: 1000; background: rgba(255,255,255,0.96);
            backdrop-filter: blur(10px); padding: 15px 0; display: flex;
            overflow-x: auto; gap: 10px; border-bottom: 3px solid var(--gold);
        }
        .category-nav::-webkit-scrollbar { display: none; }
        .nav-btn {
            padding: 8px 22px; border-radius: 50px; background: var(--dark);
            color: white; text-decoration: none; font-weight: 700; white-space: nowrap; transition: 0.3s;
        }
        .nav-btn:hover { background: var(--accent); color: white; }

        .menu-item-card {
            background: white; border-radius: 18px; padding: 20px;
            margin-bottom: 12px; display: flex; justify-content: space-between;
            align-items: center; box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border-right: 5px solid var(--gold);
        }
        .item-name { font-weight: 800; color: var(--dark); margin: 0; font-size: 1.1rem; }
        .item-price { color: var(--accent); font-weight: 900; font-size: 1.3rem; }

        #admin-panel {
            display: none; background: #fff; border: 3px solid var(--accent);
            border-radius: 25px; padding: 25px; margin: 20px 0; box-shadow: 0 15px 40px rgba(0,0,0,0.1);
        }

        .footer-contact {
            background: white; border-radius: 35px; padding: 35px;
            margin-top: 50px; text-align: center; box-shadow: 0 -10px 30px rgba(0,0,0,0.05);
        }
        .social-box { display: flex; justify-content: center; gap: 15px; margin-top: 20px; }
        .social-link {
            width: 60px; height: 60px; border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-size: 1.6rem; color: white; transition: 0.3s; text-decoration: none;
        }
        .bg-wa { background: #25d366; } .bg-fb { background: #1877f2; } .bg-call { background: #222; }
    </style>
</head>

<body>

    <!-- شاشة الافتتاحية -->
    <div id="splash-screen">
        <div class="loading-bar"></div>
        <div class="splash-content">
            <h2>مرحباً بكم في البدروم كافيه</h2>
            <div class="coffee-container">
                <i class="fas fa-wind steam"></i>
                <i class="fas fa-coffee coffee-icon"></i>
            </div>
        </div>
    </div>

    <!-- الهيدر -->
    <header class="hero">
        <div class="container">
            <h1>البدروم كافيه</h1>
            <p class="lead">أهلاً بك في عالمنا الخاص</p>
        </div>
    </header>

    <!-- شريط الأقسام -->
    <nav class="category-nav justify-content-center" id="nav-list"></nav>

    <main class="container mt-4">
        
        <!-- لوحة التحكم -->
        <section id="admin-panel">
            <h4 class="fw-bold mb-3"><i class="fas fa-edit"></i> إضافة صنف</h4>
            <div class="row g-2">
                <div class="col-md-5"><input type="text" id="itemName" class="form-control" placeholder="اسم الصنف"></div>
                <div class="col-md-3"><input type="number" id="itemPrice" class="form-control" placeholder="السعر"></div>
                <div class="col-md-4">
                    <select id="itemCat" class="form-select">
                        <option value="cold">مشروبات باردة بأنواعها</option>
                        <option value="hot">مشروبات ساخنة بأنواعها</option>
                        <option value="sweets">حلويات</option>
                        <option value="snacks">سناكس</option>
                        <option value="shisha">شيشه</option>
                        <option value="ps">بلاى ستيشن</option>
                    </select>
                </div>
                <div class="col-12 mt-3 text-center">
                    <button class="btn btn-warning w-100 fw-bold" onclick="addNewItem()">تحديث المنيو</button>
                    <button class="btn btn-link text-muted mt-2" onclick="exitAdmin()">خروج</button>
                </div>
            </div>
        </section>

        <!-- المنيو -->
        <div id="menu-content"></div>

        <!-- التواصل -->
        <section class="footer-contact">
            <h3 class="fw-bold">تواصل معنا</h3>
            <div class="social-box">
                <a href="tel:01202007566" class="social-link bg-call shadow"><i class="fas fa-phone-alt"></i></a>
                <a href="https://wa.me/201202007566" target="_blank" class="social-link bg-wa shadow"><i class="fab fa-whatsapp"></i></a>
                <a href="https://www.facebook.com/share/18AaVG1fTw/" target="_blank" class="social-link bg-fb shadow"><i class="fab fa-facebook-f"></i></a>
            </div>
            <a href="tel:01202007566" class="d-block mt-3 fw-bold text-dark text-decoration-none">0120-2007-566</a>
        </section>

    </main>

    <script>
        // إعدادات Redis
        const REDIS_URL = "https://ultimate-ferret-48101.upstash.io";
        const REDIS_TOKEN = "AbvlAAIncDEzYTgwNjBhYTRjNzI0N2NiODZjZGEwY2ZmMmIxOGI2YnAxNDgxMDE=";
        const DB_KEY = "badroom_final_data_premium";

        let menuData = [];
        const categories = {
            cold: "مشروبات باردة بأنواعها",
            hot: "مشروبات ساخنة بأنواعها",
            sweets: "حلويات",
            snacks: "سناكس",
            shisha: "شيشه",
            ps: "بلاى ستيشن"
        };

        // إخفاء الـ Splash Screen بعد التحميل
        window.addEventListener('load', () => {
            setTimeout(() => {
                const splash = document.getElementById('splash-screen');
                splash.style.opacity = '0';
                setTimeout(() => { splash.style.visibility = 'hidden'; }, 800);
            }, 3000); // 3 ثواني للتحميل
        });

        function checkAdmin() {
            const params = new URLSearchParams(window.location.search);
            if(params.get('manage') === 'true') {
                localStorage.setItem('badroom_admin_key', 'yes');
                window.history.replaceState({}, '', window.location.pathname);
            }
            return localStorage.getItem('badroom_admin_key') === 'yes';
        }

        const isAdmin = checkAdmin();

        async function loadMenu() {
            try {
                const res = await fetch(`${REDIS_URL}/get/${DB_KEY}`, { headers: { Authorization: `Bearer ${REDIS_TOKEN}` } });
                const data = await res.json();
                menuData = data.result ? JSON.parse(data.result) : [];
                render();
            } catch(e) { console.error("Database Error"); }
        }

        async function sync() {
            await fetch(`${REDIS_URL}/set/${DB_KEY}`, {
                method: 'POST',
                headers: { Authorization: `Bearer ${REDIS_TOKEN}` },
                body: JSON.stringify(menuData)
            });
            render();
        }

        function render() {
            const content = document.getElementById('menu-content');
            const nav = document.getElementById('nav-list');
            let mHtml = ''; let nHtml = '';

            if(isAdmin) document.getElementById('admin-panel').style.display = 'block';

            for(let key in categories) {
                const items = menuData.filter(i => i.cat === key);
                nHtml += `<a href="#sec-${key}" class="nav-btn">${categories[key]}</a>`;
                mHtml += `<div id="sec-${key}"><h2 class="fw-black mt-5 mb-4" style="border-right: 5px solid var(--gold); padding-right: 15px;">${categories[key]}</h2>`;
                
                if(items.length === 0) {
                    mHtml += `<p class="text-muted ms-3 small">شرفنا بزيارتك.. يتم إضافة الأصناف حالياً</p>`;
                } else {
                    items.forEach(item => {
                        mHtml += `
                            <div class="menu-item-card">
                                <div>
                                    <h4 class="item-name">${item.name}</h4>
                                    ${isAdmin ? `<button class="btn btn-link text-danger p-0 btn-sm" onclick="deleteItem(${item.id})">حذف</button>` : ''}
                                </div>
                                <div class="item-price">${item.price} <small>ج.م</small></div>
                            </div>
                        `;
                    });
                }
                mHtml += `</div>`;
            }
            content.innerHTML = mHtml;
            nav.innerHTML = nHtml;
        }

        function addNewItem() {
            const name = document.getElementById('itemName').value;
            const price = document.getElementById('itemPrice').value;
            const cat = document.getElementById('itemCat').value;
            if(!name || !price) return alert("اكمل البيانات");
            menuData.push({ id: Date.now(), name, price, cat });
            sync();
            document.getElementById('itemName').value = ''; document.getElementById('itemPrice').value = '';
        }

        function deleteItem(id) {
            if(confirm("مسح؟")) { menuData = menuData.filter(i => i.id !== id); sync(); }
        }

        function exitAdmin() { localStorage.removeItem('badroom_admin_key'); location.reload(); }

        loadMenu();
    </script>
</body>
</html>
