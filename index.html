<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    
    <!-- تحسين محركات البحث SEO -->
    <title>البدروم كافيه | El-Badroom Cafe - المنيو الرسمي</title>
    <meta name="description" content="منيو البدروم كافيه الإلكتروني بالمنصورة. مشروبات باردة وساخنة، حلويات، سناكس، ركن البلاي ستيشن والشيشة بأفضل جودة." />
    <meta name="keywords" content="البدروم كافيه, كافيه المنصورة, منيو إلكتروني, بلاي ستيشن, قهوة, مشروبات" />
    
    <!-- وسائل التواصل الاجتماعي (Open Graph) -->
    <meta property="og:title" content="البدروم كافيه | El-Badroom Cafe" />
    <meta property="og:description" content="تصفح منيو البدروم كافيه الآن واكتشف أحدث العروض." />
    <meta property="og:image" content="https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=1000&auto=format&fit=crop" />

    <!-- الأيقونات والخطوط -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
    
    <style>
        :root {
            --gold: #d4af37;
            --dark: #0a0a0a;
            --accent: #e67e22;
            --bg-body: #fdfdfd;
            --discount-red: #eb4d4b;
        }

        body { font-family: 'Cairo', sans-serif; background-color: var(--bg-body); margin: 0; overflow-x: hidden; scroll-behavior: smooth; }

        /* --- الشاشة الافتتاحية (Splash Screen) --- */
        #splash-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--dark); z-index: 10000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.8s ease, visibility 0.8s;
        }
        .loading-bar {
            position: absolute; top: 0; left: 0; height: 4px;
            background: var(--gold); width: 0%; animation: loadProgress 3s forwards;
            box-shadow: 0 0 10px var(--gold);
        }
        @keyframes loadProgress { 0% { width: 0%; } 100% { width: 100%; } }
        
        .splash-content h2 { 
            color: var(--gold); font-weight: 900; font-size: 1.8rem; margin-bottom: 25px;
            opacity: 0; animation: fadeIn 1.5s forwards 0.5s;
        }
        .coffee-container { position: relative; animation: bounce 2s infinite ease-in-out; }
        .coffee-icon { font-size: 5rem; color: var(--gold); }
        .steam {
            position: absolute; top: -30px; left: 50%; transform: translateX(-50%);
            font-size: 2rem; color: #444; animation: steamMove 2s infinite linear; opacity: 0;
        }
        @keyframes steamMove { 
            0% { transform: translate(-50%, 0); opacity: 0; }
            50% { opacity: 0.5; }
            100% { transform: translate(-50%, -40px); opacity: 0; }
        }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- الهيدر --- */
        header.hero {
            background: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.85)), url('https://images.unsplash.com/photo-1554118811-1e0d58224f24?auto=format&fit=crop&q=80&w=1000');
            background-size: cover; background-position: center;
            height: 250px; display: flex; justify-content: center; align-items: center;
            color: var(--gold); border-radius: 0 0 40px 40px; text-align: center;
        }
        .hero h1 { font-weight: 900; font-size: 3rem; margin: 0; }

        /* --- الأقسام --- */
        nav.category-nav {
            position: sticky; top: 0; z-index: 1000; background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px); padding: 15px 0; display: flex;
            overflow-x: auto; gap: 10px; border-bottom: 3px solid var(--gold);
        }
        .category-nav::-webkit-scrollbar { display: none; }
        .nav-btn {
            padding: 8px 22px; border-radius: 50px; background: var(--dark);
            color: white; text-decoration: none; font-weight: 700; white-space: nowrap; transition: 0.3s;
        }
        .nav-btn:hover { background: var(--accent); color: white; }

        /* --- المنيو --- */
        .menu-item-card {
            background: white; border-radius: 20px; padding: 22px;
            margin-bottom: 15px; display: flex; justify-content: space-between;
            align-items: center; box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-right: 6px solid var(--gold); transition: 0.3s;
        }
        .item-info h4 { font-weight: 800; color: var(--dark); margin: 0; font-size: 1.2rem; }
        .price-box { text-align: left; }
        .price-now { color: var(--accent); font-weight: 900; font-size: 1.4rem; }
        .price-old { text-decoration: line-through; color: #aaa; font-size: 0.9rem; margin-right: 8px; }
        .discount-tag { background: var(--discount-red); color: white; padding: 2px 8px; border-radius: 8px; font-size: 0.7rem; font-weight: 700; }

        /* --- لوحة تحكم الإدارة --- */
        #admin-panel {
            display: none; background: white; border: 3px solid var(--accent);
            border-radius: 30px; padding: 30px; margin: 20px 0;
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
        }

        /* --- التواصل --- */
        .footer-contact {
            background: white; border-radius: 40px; padding: 40px;
            margin-top: 60px; text-align: center; box-shadow: 0 -10px 30px rgba(0,0,0,0.05);
        }
        .social-links { display: flex; justify-content: center; gap: 20px; margin-top: 25px; }
        .social-icon {
            width: 65px; height: 65px; border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-size: 1.8rem; color: white; transition: 0.3s; text-decoration: none;
        }
        .bg-wa { background: #25d366; } .bg-fb { background: #1877f2; } .bg-call { background: #222; }
    </style>
</head>

<body>

    <!-- الشاشة الافتتاحية -->
    <div id="splash-screen">
        <div class="loading-bar"></div>
        <div class="splash-content">
            <h2>مرحباً بكم في البدروم كافيه</h2>
            <div class="coffee-container">
                <i class="fas fa-wind steam"></i>
                <i class="fas fa-coffee coffee-icon"></i>
            </div>
        </div>
    </div>

    <header class="hero">
        <div class="container">
            <h1>البدروم كافيه</h1>
            <p class="lead">الجودة والفخامة في كل صنف</p>
        </div>
    </header>

    <nav class="category-nav justify-content-center" id="nav-list"></nav>

    <main class="container mt-4">
        
        <!-- لوحة التحكم (للمدير) -->
        <section id="admin-panel">
            <h4 class="fw-bold mb-4 text-center text-dark"><i class="fas fa-user-shield"></i> لوحة تحكم المدير</h4>
            <div class="row g-3">
                <div class="col-md-4">
                    <label class="small fw-bold">اسم الصنف</label>
                    <input type="text" id="itemName" class="form-control" placeholder="اسم المشروب/الأكلة">
                </div>
                <div class="col-md-2">
                    <label class="small fw-bold">السعر الأصلي</label>
                    <input type="number" id="itemPrice" class="form-control" placeholder="السعر">
                </div>
                <div class="col-md-2">
                    <label class="small fw-bold text-danger">سعر الخصم (اختياري)</label>
                    <input type="number" id="itemDisc" class="form-control" placeholder="السعر بعد الخصم">
                </div>
                <div class="col-md-4">
                    <label class="small fw-bold">القسم</label>
                    <select id="itemCat" class="form-select">
                        <option value="cold">مشروبات باردة بأنواعها</option>
                        <option value="hot">مشروبات ساخنة بأنواعها</option>
                        <option value="sweets">حلويات</option>
                        <option value="snacks">سناكس</option>
                        <option value="shisha">شيشه</option>
                        <option value="ps">بلاى ستيشن</option>
                    </select>
                </div>
                <div class="col-12 mt-4">
                    <button class="btn btn-warning w-100 fw-bold py-2 shadow-sm" onclick="addNewItem()">إضافة الصنف وتحديث المنيو فوراً</button>
                    <button class="btn btn-link text-muted w-100 mt-2 btn-sm" onclick="exitAdmin()">إغلاق لوحة التحكم</button>
                </div>
            </div>
        </section>

        <!-- عرض المنيو -->
        <div id="menu-content"></div>

        <!-- العروض قريبا -->
        <h2 class="fw-black mt-5 mb-4" style="border-right: 6px solid var(--accent); padding-right: 15px;">عروض خاصة</h2>
        <div style="background: #111; border-radius: 25px; padding: 60px 20px; text-align: center; color: #333; position: relative; overflow: hidden;">
            <h2 style="font-size: 3.5rem; font-weight: 900; opacity: 0.1; margin:0;">OFFERS</h2>
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--accent); color: white; padding: 10px 35px; font-weight: 900; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.4);">قريباً .. SOON</div>
        </div>

        <!-- تواصل معنا -->
        <section class="footer-contact">
            <h3 class="fw-bold">تواصل معنا</h3>
            <div class="social-links">
                <a href="tel:01202007566" class="social-icon bg-call shadow"><i class="fas fa-phone-alt"></i></a>
                <a href="https://wa.me/201202007566" target="_blank" class="social-icon bg-wa shadow"><i class="fab fa-whatsapp"></i></a>
                <a href="https://www.facebook.com/share/18AaVG1fTw/" target="_blank" class="social-icon bg-fb shadow"><i class="fab fa-facebook-f"></i></a>
            </div>
            <a href="tel:01202007566" class="phone-display d-block mt-3 text-dark fw-bold fs-4 text-decoration-none">012-0200-7566</a>
        </section>

    </main>

    <footer class="text-center py-5 text-muted">
        <hr class="container">
        <p>© 2024 جميع الحقوق محفوظة - البدروم كافيه</p>
    </footer>

    <script>
        // --- إعدادات Redis ---
        const REDIS_URL = "https://ultimate-ferret-48101.upstash.io";
        const REDIS_TOKEN = "AbvlAAIncDEzYTgwNjBhYTRjNzI0N2NiODZjZGEwY2ZmMmIxOGI2YnAxNDgxMDE=";
        const KEY = "badroom_final_v4_discount";

        let menuData = [];
        const cats = {
            cold: "مشروبات باردة بأنواعها",
            hot: "مشروبات ساخنة بأنواعها",
            sweets: "حلويات",
            snacks: "سناكس",
            shisha: "شيشه",
            ps: "بلاى ستيشن"
        };

        // إخفاء الـ Splash Screen
        window.addEventListener('load', () => {
            setTimeout(() => {
                const splash = document.getElementById('splash-screen');
                splash.style.opacity = '0';
                setTimeout(() => { splash.style.visibility = 'hidden'; }, 800);
            }, 3000);
        });

        // التحقق من صلاحية المدير عبر ?manage=true
        function checkAdmin() {
            const p = new URLSearchParams(window.location.search);
            if(p.get('manage') === 'true') {
                localStorage.setItem('badroom_manager', 'yes');
                window.history.replaceState({}, '', window.location.pathname);
            }
            return localStorage.getItem('badroom_manager') === 'yes';
        }

        const isAdmin = checkAdmin();

        async function loadData() {
            const res = await fetch(`${REDIS_URL}/get/${KEY}`, { headers: { Authorization: `Bearer ${REDIS_TOKEN}` } });
            const data = await res.json();
            menuData = data.result ? JSON.parse(data.result) : [];
            render();
        }

        async function sync() {
            await fetch(`${REDIS_URL}/set/${KEY}`, {
                method: 'POST',
                headers: { Authorization: `Bearer ${REDIS_TOKEN}` },
                body: JSON.stringify(menuData)
            });
            render();
        }

        function render() {
            const content = document.getElementById('menu-content');
            const nav = document.getElementById('nav-list');
            let mHtml = ''; let nHtml = '';

            if(isAdmin) document.getElementById('admin-panel').style.display = 'block';

            for(let k in cats) {
                const items = menuData.filter(i => i.cat === k);
                nHtml += `<a href="#sec-${k}" class="nav-btn">${cats[k]}</a>`;
                mHtml += `<div id="sec-${k}"><h2 class="fw-black mt-5 mb-4" style="border-right: 6px solid var(--gold); padding-right: 15px;">${cats[k]}</h2>`;
                
                if(items.length === 0) {
                    mHtml += `<p class="text-muted ms-3 small">قريباً سيتم إضافة أصناف جديدة في هذا القسم...</p>`;
                } else {
                    items.forEach(item => {
                        mHtml += `
                            <div class="menu-item-card">
                                <div class="item-info">
                                    <h4>${item.name} ${item.disc ? '<span class="discount-tag">خصم</span>' : ''}</h4>
                                    ${isAdmin ? `<button class="btn btn-link text-danger p-0 btn-sm" onclick="deleteItem(${item.id})"><i class="fas fa-trash"></i> حذف</button>` : ''}
                                </div>
                                <div class="price-box">
                                    <div class="price-now">
                                        ${item.disc ? item.disc : item.price} <small>ج.م</small>
                                        ${item.disc ? `<span class="price-old">${item.price}</span>` : ''}
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                }
                mHtml += `</div>`;
            }
            content.innerHTML = mHtml;
            nav.innerHTML = nHtml;
        }

        function addNewItem() {
            const name = document.getElementById('itemName').value;
            const price = document.getElementById('itemPrice').value;
            const disc = document.getElementById('itemDisc').value;
            const cat = document.getElementById('itemCat').value;

            if(!name || !price) return alert("الاسم والسعر مطلوبين!");

            menuData.push({
                id: Date.now(),
                name,
                price: parseFloat(price),
                disc: disc ? parseFloat(disc) : null,
                cat
            });
            sync();
            document.getElementById('itemName').value = '';
            document.getElementById('itemPrice').value = '';
            document.getElementById('itemDisc').value = '';
        }

        function deleteItem(id) {
            if(confirm("هل متأكد من حذف الصنف؟")) {
                menuData = menuData.filter(i => i.id !== id);
                sync();
            }
        }

        function exitAdmin() {
            localStorage.removeItem('badroom_manager');
            location.reload();
        }

        loadData();
    </script>
</body>
</html>
