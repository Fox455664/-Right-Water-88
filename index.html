<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>البدروم كافيه | El-Badroom Cafe</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
    
    <style>
        :root { --gold: #d4af37; --dark: #0a0a0a; --accent: #e67e22; --discount: #eb4d4b; }
        body { font-family: 'Cairo', sans-serif; background-color: #fcfcfc; margin: 0; overflow-x: hidden; scroll-behavior: smooth; }
        
        /* Splash Screen */
        #splash { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--dark); z-index: 10000; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: 0.8s; }
        .l-bar { position: absolute; top: 0; left: 0; height: 4px; background: var(--gold); width: 0%; animation: lp 3s forwards; }
        @keyframes lp { 100% { width: 100%; } }
        #splash h2 { color: var(--gold); font-weight: 900; margin-bottom: 20px; }
        .c-icon { font-size: 5rem; color: var(--gold); animation: b 2s infinite; }
        @keyframes b { 50% { transform: translateY(-10px); } }

        /* Header */
        .header-cafe { 
            background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('https://images.unsplash.com/photo-1554118811-1e0d58224f24?auto=format&fit=crop&q=80&w=1000'); 
            background-size: cover; background-position: center; 
            height: 280px; display: flex; flex-direction: column; justify-content: center; align-items: center; 
            color: var(--gold); border-radius: 0 0 50px 50px; text-align: center; padding: 20px;
        }
        .header-cafe h1 { font-weight: 900; font-size: 3.5rem; margin-bottom: 5px; }
        .header-cafe p { color: #fff; font-size: 1.2rem; font-weight: 600; opacity: 0.9; }
        
        /* Nav */
        nav { position: sticky; top: 0; z-index: 1000; background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); padding: 12px 0; display: flex; overflow-x: auto; border-bottom: 3px solid var(--gold); }
        nav::-webkit-scrollbar { display: none; }
        .n-btn { padding: 8px 20px; border-radius: 50px; background: var(--dark); color: white; text-decoration: none; font-weight: 700; margin: 0 5px; white-space: nowrap; }

        /* الأقسام */
        .section-title {
            margin-top: 40px; margin-bottom: 25px;
            font-weight: 900; font-size: 2.2rem;
            color: #000; /* لون أسود صريح لليبان */
            border-right: 8px solid var(--gold);
            padding-right: 15px; display: block;
        }

        /* Cards */
        .m-card { background: white; border-radius: 18px; padding: 18px; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 10px rgba(0,0,0,0.05); border-right: 5px solid var(--gold); }
        .i-price { text-align: left; }
        .p-now { color: var(--accent); font-weight: 900; font-size: 1.3rem; }
        .p-old { text-decoration: line-through; color: #aaa; font-size: 0.8rem; margin-right: 5px; }
        .d-tag { background: var(--discount); color: white; padding: 2px 7px; border-radius: 7px; font-size: 0.6rem; margin-right: 5px; }

        /* Admin */
        #admin { display: none; background: white; border: 3px solid var(--accent); border-radius: 25px; padding: 25px; margin: 20px 0; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        
        /* Contact */
        .c-box { background: white; border-radius: 35px; padding: 30px; margin-top: 40px; text-align: center; box-shadow: 0 -5px 20px rgba(0,0,0,0.05); }
        .s-link { width: 55px; height: 55px; border-radius: 50%; display: inline-flex; justify-content: center; align-items: center; font-size: 1.5rem; color: white; margin: 0 10px; text-decoration: none; }
    </style>
</head>
<body>

    <div id="splash"><div class="l-bar"></div><h2>مرحباً بكم في البدروم كافيه</h2><i class="fas fa-coffee c-icon"></i></div>

    <header class="header-cafe">
        <h1>البدروم كافيه</h1>
        <p>تجربة لا تُنسى في كل كوب</p>
    </header>

    <nav class="justify-content-center" id="navbar"></nav>

    <main class="container mt-4">
        <section id="admin">
            <h5 class="fw-bold mb-3">لوحة التحكم</h5>
            <div class="row g-2">
                <div class="col-md-4"><input type="text" id="n" class="form-control" placeholder="اسم الصنف"></div>
                <div class="col-md-2"><input type="number" id="p" class="form-control" placeholder="السعر"></div>
                <div class="col-md-2"><input type="number" id="d" class="form-control" placeholder="خصم؟"></div>
                <div class="col-md-4">
                    <select id="c" class="form-select">
                        <option value="cold">مشروبات باردة</option>
                        <option value="hot">مشروبات ساخنة</option>
                        <option value="sweets">حلويات</option>
                        <option value="snacks">سناكس</option>
                        <option value="shisha">شيشه</option>
                        <option value="ps">بلاى ستيشن</option>
                    </select>
                </div>
                <button class="btn btn-warning mt-3 fw-bold" onclick="add()">تحديث المنيو</button>
                <button class="btn btn-outline-danger mt-2 fw-bold btn-sm" onclick="logoutAdm()">تسجيل خروج من وضع الإدارة</button>
            </div>
        </section>

        <div id="menu"></div>

        <section class="c-box">
            <h4 class="fw-bold">تواصل معنا</h4>
            <a href="tel:01202007566" class="s-link shadow" style="background:#222"><i class="fas fa-phone-alt"></i></a>
            <a href="https://wa.me/201202007566" class="s-link shadow" style="background:#25d366"><i class="fab fa-whatsapp"></i></a>
            <a href="https://www.facebook.com/share/18AaVG1fTw/" class="s-link shadow" style="background:#1877f2"><i class="fab fa-facebook-f"></i></a>
            <p class="mt-3 fw-bold">0120-2007-566</p>
        </section>
    </main>

    <script>
        const URL = "https://ultimate-ferret-48101.upstash.io";
        const TK = "AbvlAAIncDEzYTgwNjBhYTRjNzI0N2NiODZjZGEwY2ZmMmIxOGI2YnAxNDgxMDE=";
        const KEY = "badroom_live_v5";

        let data = [];
        const cats = { cold: "بارد", hot: "ساخن", sweets: "حلويات", snacks: "سناكس", shisha: "شيشه", ps: "بلاى ستيشن" };

        window.onload = () => setTimeout(() => { document.getElementById('splash').style.opacity='0'; setTimeout(()=>document.getElementById('splash').style.display='none', 800) }, 3000);

        function isAdm() { 
            const p = new URLSearchParams(window.location.search);
            if(p.get('manage') === 'true') localStorage.setItem('adm', '1');
            return localStorage.getItem('adm') === '1';
        }

        // دالة الخروج من الإدارة
        function logoutAdm() {
            localStorage.removeItem('adm');
            window.location.href = window.location.pathname;
        }

        async function load() {
            const r = await fetch(`${URL}/get/${KEY}`, { headers: { Authorization: `Bearer ${TK}` } });
            const j = await r.json();
            data = j.result ? JSON.parse(j.result) : [];
            draw();
        }

        async function save() {
            await fetch(`${URL}/set/${KEY}`, { method: 'POST', headers: { Authorization: `Bearer ${TK}` }, body: JSON.stringify(data) });
            draw();
        }

        function draw() {
            const m = document.getElementById('menu'); const n = document.getElementById('navbar');
            let mh = ''; let nh = '';
            if(isAdm()) document.getElementById('admin').style.display = 'block';

            for(let k in cats) {
                const items = data.filter(i => i.cat === k);
                nh += `<a href="#${k}" class="n-btn">${cats[k]}</a>`;
                mh += `<div id="${k}"><h2 class="section-title">${cats[k]}</h2>`;
                if(!items.length) mh += `<p class="text-muted ms-3 small">قريباً...</p>`;
                else items.forEach(i => {
                    mh += `<div class="m-card"><div><h5 class="fw-bold mb-0">${i.name} ${i.disc?'<span class="d-tag">خصم</span>':''}</h5>
                    ${isAdm()?`<button class="btn btn-link text-danger p-0 sm" onclick="del(${i.id})">حذف</button>`:''}</div>
                    <div class="i-price"><div class="p-now">${i.disc||i.price} <small>ج.م</small> ${i.disc?`<span class="p-old">${i.price}</span>`:''}</div></div></div>`;
                });
                mh += `</div>`;
            }
            m.innerHTML = mh; n.innerHTML = nh;
        }

        function add() {
            const name = document.getElementById('n').value, price = document.getElementById('p').value, disc = document.getElementById('d').value, cat = document.getElementById('c').value;
            if(!name || !price) return alert("اكمل البيانات");
            data.push({ id: Date.now(), name, price, disc, cat });
            save();
            document.getElementById('n').value=''; document.getElementById('p').value=''; document.getElementById('d').value='';
        }

        function del(id) { if(confirm("حذف؟")) { data = data.filter(i => i.id !== id); save()
